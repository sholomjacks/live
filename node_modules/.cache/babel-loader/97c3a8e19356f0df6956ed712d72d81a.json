{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar utils_1 = require(\"./utils\");\n\nfunction throwLater(e) {\n  setTimeout(function () {\n    throw e;\n  }, 0);\n}\n\nfunction asCallback(promise, nodeback, options) {\n  if (typeof nodeback === 'function') {\n    promise.then(function (val) {\n      var ret;\n\n      if (options !== undefined && Object(options).spread && Array.isArray(val)) {\n        ret = utils_1.tryCatch(nodeback).apply(undefined, [null].concat(val));\n      } else {\n        ret = val === undefined ? utils_1.tryCatch(nodeback)(null) : utils_1.tryCatch(nodeback)(null, val);\n      }\n\n      if (ret === utils_1.errorObj) {\n        throwLater(ret.e);\n      }\n    }, function (cause) {\n      if (!cause) {\n        var newReason = new Error(cause + '');\n        Object.assign(newReason, {\n          cause: cause\n        });\n        cause = newReason;\n      }\n\n      var ret = utils_1.tryCatch(nodeback)(cause);\n\n      if (ret === utils_1.errorObj) {\n        throwLater(ret.e);\n      }\n    });\n  }\n\n  return promise;\n}\n\nexports.default = asCallback;","map":{"version":3,"sources":["C:/Users/gamem/codecademy/node_modules/standard-as-callback/built/index.js"],"names":["Object","defineProperty","exports","value","utils_1","require","throwLater","e","setTimeout","asCallback","promise","nodeback","options","then","val","ret","undefined","spread","Array","isArray","tryCatch","apply","concat","errorObj","cause","newReason","Error","assign","default"],"mappings":"AAAA;;AACAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAAEC,EAAAA,KAAK,EAAE;AAAT,CAA7C;;AACA,IAAMC,OAAO,GAAGC,OAAO,CAAC,SAAD,CAAvB;;AACA,SAASC,UAAT,CAAoBC,CAApB,EAAuB;AACnBC,EAAAA,UAAU,CAAC,YAAY;AACnB,UAAMD,CAAN;AACH,GAFS,EAEP,CAFO,CAAV;AAGH;;AACD,SAASE,UAAT,CAAoBC,OAApB,EAA6BC,QAA7B,EAAuCC,OAAvC,EAAgD;AAC5C,MAAI,OAAOD,QAAP,KAAoB,UAAxB,EAAoC;AAChCD,IAAAA,OAAO,CAACG,IAAR,CAAa,UAACC,GAAD,EAAS;AAClB,UAAIC,GAAJ;;AACA,UAAIH,OAAO,KAAKI,SAAZ,IAAyBhB,MAAM,CAACY,OAAD,CAAN,CAAgBK,MAAzC,IAAmDC,KAAK,CAACC,OAAN,CAAcL,GAAd,CAAvD,EAA2E;AACvEC,QAAAA,GAAG,GAAGX,OAAO,CAACgB,QAAR,CAAiBT,QAAjB,EAA2BU,KAA3B,CAAiCL,SAAjC,EAA4C,CAAC,IAAD,EAAOM,MAAP,CAAcR,GAAd,CAA5C,CAAN;AACH,OAFD,MAGK;AACDC,QAAAA,GAAG,GAAGD,GAAG,KAAKE,SAAR,GACAZ,OAAO,CAACgB,QAAR,CAAiBT,QAAjB,EAA2B,IAA3B,CADA,GAEAP,OAAO,CAACgB,QAAR,CAAiBT,QAAjB,EAA2B,IAA3B,EAAiCG,GAAjC,CAFN;AAGH;;AACD,UAAIC,GAAG,KAAKX,OAAO,CAACmB,QAApB,EAA8B;AAC1BjB,QAAAA,UAAU,CAACS,GAAG,CAACR,CAAL,CAAV;AACH;AACJ,KAbD,EAaG,UAACiB,KAAD,EAAW;AACV,UAAI,CAACA,KAAL,EAAY;AACR,YAAMC,SAAS,GAAG,IAAIC,KAAJ,CAAUF,KAAK,GAAG,EAAlB,CAAlB;AACAxB,QAAAA,MAAM,CAAC2B,MAAP,CAAcF,SAAd,EAAyB;AAAED,UAAAA,KAAK,EAALA;AAAF,SAAzB;AACAA,QAAAA,KAAK,GAAGC,SAAR;AACH;;AACD,UAAMV,GAAG,GAAGX,OAAO,CAACgB,QAAR,CAAiBT,QAAjB,EAA2Ba,KAA3B,CAAZ;;AACA,UAAIT,GAAG,KAAKX,OAAO,CAACmB,QAApB,EAA8B;AAC1BjB,QAAAA,UAAU,CAACS,GAAG,CAACR,CAAL,CAAV;AACH;AACJ,KAvBD;AAwBH;;AACD,SAAOG,OAAP;AACH;;AACDR,OAAO,CAAC0B,OAAR,GAAkBnB,UAAlB","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst utils_1 = require(\"./utils\");\nfunction throwLater(e) {\n    setTimeout(function () {\n        throw e;\n    }, 0);\n}\nfunction asCallback(promise, nodeback, options) {\n    if (typeof nodeback === 'function') {\n        promise.then((val) => {\n            let ret;\n            if (options !== undefined && Object(options).spread && Array.isArray(val)) {\n                ret = utils_1.tryCatch(nodeback).apply(undefined, [null].concat(val));\n            }\n            else {\n                ret = val === undefined\n                    ? utils_1.tryCatch(nodeback)(null)\n                    : utils_1.tryCatch(nodeback)(null, val);\n            }\n            if (ret === utils_1.errorObj) {\n                throwLater(ret.e);\n            }\n        }, (cause) => {\n            if (!cause) {\n                const newReason = new Error(cause + '');\n                Object.assign(newReason, { cause });\n                cause = newReason;\n            }\n            const ret = utils_1.tryCatch(nodeback)(cause);\n            if (ret === utils_1.errorObj) {\n                throwLater(ret.e);\n            }\n        });\n    }\n    return promise;\n}\nexports.default = asCallback;\n"]},"metadata":{},"sourceType":"script"}