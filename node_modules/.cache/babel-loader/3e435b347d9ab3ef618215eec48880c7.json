{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nfunction isSentinelEql(a, b) {\n  return (a.host || \"127.0.0.1\") === (b.host || \"127.0.0.1\") && (a.port || 26379) === (b.port || 26379);\n}\n\nclass SentinelIterator {\n  constructor(sentinels) {\n    this.cursor = 0;\n    this.sentinels = sentinels.slice(0);\n  }\n\n  next() {\n    const done = this.cursor >= this.sentinels.length;\n    return {\n      done,\n      value: done ? undefined : this.sentinels[this.cursor++]\n    };\n  }\n\n  reset(moveCurrentEndpointToFirst) {\n    if (moveCurrentEndpointToFirst && this.sentinels.length > 1 && this.cursor !== 1) {\n      this.sentinels.unshift(...this.sentinels.splice(this.cursor - 1));\n    }\n\n    this.cursor = 0;\n  }\n\n  add(sentinel) {\n    for (let i = 0; i < this.sentinels.length; i++) {\n      if (isSentinelEql(sentinel, this.sentinels[i])) {\n        return false;\n      }\n    }\n\n    this.sentinels.push(sentinel);\n    return true;\n  }\n\n  toString() {\n    return `${JSON.stringify(this.sentinels)} @${this.cursor}`;\n  }\n\n}\n\nexports.default = SentinelIterator;","map":{"version":3,"sources":["C:/Users/gamem/codecademy/node_modules/ioredis/built/connectors/SentinelConnector/SentinelIterator.js"],"names":["Object","defineProperty","exports","value","isSentinelEql","a","b","host","port","SentinelIterator","constructor","sentinels","cursor","slice","next","done","length","undefined","reset","moveCurrentEndpointToFirst","unshift","splice","add","sentinel","i","push","toString","JSON","stringify","default"],"mappings":"AAAA;;AACAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAAEC,EAAAA,KAAK,EAAE;AAAT,CAA7C;;AACA,SAASC,aAAT,CAAuBC,CAAvB,EAA0BC,CAA1B,EAA6B;AACzB,SAAQ,CAACD,CAAC,CAACE,IAAF,IAAU,WAAX,OAA6BD,CAAC,CAACC,IAAF,IAAU,WAAvC,KACJ,CAACF,CAAC,CAACG,IAAF,IAAU,KAAX,OAAuBF,CAAC,CAACE,IAAF,IAAU,KAAjC,CADJ;AAEH;;AACD,MAAMC,gBAAN,CAAuB;AACnBC,EAAAA,WAAW,CAACC,SAAD,EAAY;AACnB,SAAKC,MAAL,GAAc,CAAd;AACA,SAAKD,SAAL,GAAiBA,SAAS,CAACE,KAAV,CAAgB,CAAhB,CAAjB;AACH;;AACDC,EAAAA,IAAI,GAAG;AACH,UAAMC,IAAI,GAAG,KAAKH,MAAL,IAAe,KAAKD,SAAL,CAAeK,MAA3C;AACA,WAAO;AAAED,MAAAA,IAAF;AAAQZ,MAAAA,KAAK,EAAEY,IAAI,GAAGE,SAAH,GAAe,KAAKN,SAAL,CAAe,KAAKC,MAAL,EAAf;AAAlC,KAAP;AACH;;AACDM,EAAAA,KAAK,CAACC,0BAAD,EAA6B;AAC9B,QAAIA,0BAA0B,IAC1B,KAAKR,SAAL,CAAeK,MAAf,GAAwB,CADxB,IAEA,KAAKJ,MAAL,KAAgB,CAFpB,EAEuB;AACnB,WAAKD,SAAL,CAAeS,OAAf,CAAuB,GAAG,KAAKT,SAAL,CAAeU,MAAf,CAAsB,KAAKT,MAAL,GAAc,CAApC,CAA1B;AACH;;AACD,SAAKA,MAAL,GAAc,CAAd;AACH;;AACDU,EAAAA,GAAG,CAACC,QAAD,EAAW;AACV,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKb,SAAL,CAAeK,MAAnC,EAA2CQ,CAAC,EAA5C,EAAgD;AAC5C,UAAIpB,aAAa,CAACmB,QAAD,EAAW,KAAKZ,SAAL,CAAea,CAAf,CAAX,CAAjB,EAAgD;AAC5C,eAAO,KAAP;AACH;AACJ;;AACD,SAAKb,SAAL,CAAec,IAAf,CAAoBF,QAApB;AACA,WAAO,IAAP;AACH;;AACDG,EAAAA,QAAQ,GAAG;AACP,WAAQ,GAAEC,IAAI,CAACC,SAAL,CAAe,KAAKjB,SAApB,CAA+B,KAAI,KAAKC,MAAO,EAAzD;AACH;;AA5BkB;;AA8BvBV,OAAO,CAAC2B,OAAR,GAAkBpB,gBAAlB","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction isSentinelEql(a, b) {\n    return ((a.host || \"127.0.0.1\") === (b.host || \"127.0.0.1\") &&\n        (a.port || 26379) === (b.port || 26379));\n}\nclass SentinelIterator {\n    constructor(sentinels) {\n        this.cursor = 0;\n        this.sentinels = sentinels.slice(0);\n    }\n    next() {\n        const done = this.cursor >= this.sentinels.length;\n        return { done, value: done ? undefined : this.sentinels[this.cursor++] };\n    }\n    reset(moveCurrentEndpointToFirst) {\n        if (moveCurrentEndpointToFirst &&\n            this.sentinels.length > 1 &&\n            this.cursor !== 1) {\n            this.sentinels.unshift(...this.sentinels.splice(this.cursor - 1));\n        }\n        this.cursor = 0;\n    }\n    add(sentinel) {\n        for (let i = 0; i < this.sentinels.length; i++) {\n            if (isSentinelEql(sentinel, this.sentinels[i])) {\n                return false;\n            }\n        }\n        this.sentinels.push(sentinel);\n        return true;\n    }\n    toString() {\n        return `${JSON.stringify(this.sentinels)} @${this.cursor}`;\n    }\n}\nexports.default = SentinelIterator;\n"]},"metadata":{},"sourceType":"script"}